<html ng-app="BI-visualization">
  <head>

    <!-- Bootstrap -->
    <link href="bower_components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="//localhost:35729/livereload.js"></script>

    <style>
shelf {
  display:inline-block;
  border: 1px solid black;
}
    </style>
  </head>
  <body ng-controller="glueController">
    <button ng-click="loadMetadata()">Load Metadata</button>
    <cube setup-metadata="API.setupMetadata"
          get-dimensions="API.getDimensions"
          get-measures="API.getMeasures">

      <div class="col-xs-3">
        <dimensions setup-items="API.setupDimensions"></dimensions>
        <measures setup-items="API.setupMeasures"></measures>
      </div>
      <div class="col-xs-9">
        <shelf class="col-xs-4"
               type="typeShelfGraphFilter"
               on-add-item="API.shelfGraphFilterOnAddItem">
          Filter
        </shelf>
        <shelf class="col-xs-4"
               type="typeShelfGraphColumn"
               on-add-item="API.shelfGraphColumnOnAddItem">
          Column
        </shelf>
        <shelf class="col-xs-4"
               type="typeShelfGraphRow"
               on-add-item="API.shelfGraphRowOnAddItem">
          Row
        </shelf>
      </div>

    </cube>
  </body>

  <script src="bower_components/angular/angular.js"></script>
  <script src="bower_components/jquery/dist/jquery.min.js"></script>
  <script src="bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
  <script src="main.js"></script>

  <script>
angular
  .module('BI-visualization')
  .controller('glueController', ['$scope', glueController]);

function glueController($scope) {
  $scope.API = {
    shelfGraphFilterOnAddItem: shelfGraphFilterOnAddItem,
    shelfGraphColumnOnAddItem: shelfGraphColumnOnAddItem,
    shelfGraphRowOnAddItem: shelfGraphRowOnAddItem
  };

  $scope.typeShelfGraphFilter = "graph-filter";
  $scope.typeShelfGraphRow = "graph-row";
  $scope.typeShelfGraphColumn = "graph-column";

  $scope.loadMetadata = function loadMetadata() {
    var metadata = [
      { name: 'column1', type: 'string'  },
      { name: 'column2', type: 'string'  },
      { name: 'column3', type: 'float'   },
      { name: 'column4', type: 'integer' }
    ];

    $scope.API.setupMetadata(metadata);
    $scope.API.setupDimensions($scope.API.getDimensions());
    $scope.API.setupMeasures($scope.API.getMeasures());
  };

  function shelfGraphFilterOnAddItem(item) {
    console.log(item, "was added");
  }

  function shelfGraphRowOnAddItem(item) {
    console.log(item, "was added");
  }

  function shelfGraphColumnOnAddItem(item) {
    console.log(item, "was added");
  }
}
  </script>
</html>
